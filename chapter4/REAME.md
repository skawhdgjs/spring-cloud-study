# 서비스 디스커버리

디스커버리 서버 : 유레카 (Eureka) 

클라이언트, 서버의 두 부분으로 구성돼 있다. 

* 서버  : 전용 스프링 부트 애플리케이션으로 실행 
    
1. 등록된 서비스의 목록을 수집하기 위한 API
2. 새로운 서비스를 네트워크 위치 주소와 함께 등록하기 위한 API

* 각 서버의 상태를 다른 서버에 복제해 설정하고 배포함으로써 가용성


* 클라이언트 : 마이크로서비스 애플리케이션 의존성을 포함해 사용

1. 애플리케이션 시작후 등록과 종료 전 등록 해제를 담당, 유레카 서버로부터 주기적으로 최신 서비스 목록을 가져옴

* 핵심

1. 유레카 서버를 내장한 애플리케이션 배포
2. 클라이언트 측 애플리에키엿넹서 유레카서버 연결
3. 고급 디스커버리 클라이언트 설정
4. 클라이언트와 서버 사이의 보안 통신하기
5. 가용성을 높이기 위한 설정 및 동료 간 복제 메커니즘
6. 다른 가용 존에 클라이언트 측 애플리케이션의 인스턴스 등록하기  

## 유레카 서버 시작

의존성 추가 : spring-cloud-starter-eureka-server
어노테이션 추가 @EnableEurekaServer
 
 
## 고급 컨피규레이션 설정

1. 서버 컨피규레이션
2. 클라이언트 컨피규레이션
3. 인스턴스 컨피규레이션 

## 레지스트리 갱신하기

self-prservation mode - 연결 유지, 비활성, heart beat 때문에 90초 기다린다.
서버, client 쪽에서 timeout Tlrks tjfwjd vlfdy

## 인스턴스 식별자

eureka.instance.instanceId 로 이름 변경, eureka.instacne.preferIpAddress 속성이용
또한 하나 이상의 네트워크 인터페이스가 있을경우 blacklist, whitelist 지정할 수 있다.

## 응답 캐시

응답을 캐싱, 백그라운드 task로 30 초마다 expire 
설정은 바꿀 수 있다.
 
## 서버 보안 통신

프로젝트 의존성에 시큐리티 스타터를 추가해야 한다.
